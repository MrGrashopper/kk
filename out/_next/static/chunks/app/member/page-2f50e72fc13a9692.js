(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{3543:function(e,r,a){Promise.resolve().then(a.bind(a,5537))},5537:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return page}});var t=a(7437),s=a(2265),l=a(1752),n=a.n(l),c=a(4131),i=a.n(c);let d=["black","green_jkd","blue_jkd","yellow_jkd","green_shaolin","blue_shaolin","yellow_shaolin"],translateTier=e=>{switch(e){case"black":default:return"schwarz";case"green_jkd":return"gr\xfcn JKD";case"blue_jkd":return"blau JKD";case"yellow_jkd":return"gelb JKD";case"green_shaolin":return"gr\xfcn shaolin";case"blue_shaolin":return"blau shaolin";case"yellow_shaolin":return"gelb shaolin"}},translateBorderColor=e=>{switch(e){case"black":default:return"border-black";case"green_jkd":case"green_shaolin":return"border-green";case"blue_jkd":case"blue_shaolin":return"border-blue";case"yellow_jkd":case"yellow_shaolin":return"border-yellow"}},encrypt=e=>{let r=i().createCipher("aes-256-cbc","Your 32 char secret here");return r.update(e,"utf8","hex")+r.final("hex")},decrypt=e=>{let r=i().createDecipher("aes-256-cbc","Your 32 char secret here");return r.update(e,"hex","utf8")+r.final("utf8")},generateLink=e=>{let r=e.replace("_","-");return"/member/programs/".concat(r)};var memberLogin=e=>{let{setHasAccess:r}=e,[a,l]=(0,s.useState)(""),setEncryptedCookie=(e,r)=>{let a=encrypt(JSON.stringify(r));localStorage.setItem(e,a)},handleSubmit=async()=>{let e=a.split(",").map(e=>e.trim()),t=await fetch("/api/enter?tokens=".concat(e.join(",")));if(200===t.status){let e=await t.json();e.tiers&&e.tiers.length>0?(setEncryptedCookie("cookie-kk-member",e.tiers),r(!0),window.location.href="/member"):alert("Ung\xfcltiger Zugang")}else alert("Ung\xfcltiger Zugang")};return(0,t.jsxs)("div",{className:"flex flex-col h-screen justify-center items-center",children:[(0,t.jsx)("div",{className:n().className,children:(0,t.jsx)("h3",{className:"text-3xl text-primary text-center",children:"Login f\xfcr den Mitgliederbereich"})}),(0,t.jsx)("p",{className:"md:mx-20 lg:mx-32  m-3 lg:m-10 text-primary text-2 text-center",children:"Du hast per E-Mail den Zugangscodes von uns bekommen. Falls du mehrere Codes hast, einfach durch Komma trennen."}),(0,t.jsxs)("div",{className:"mx-3 md:mx-20 lg:mx-32  m-3 lg:m-10 bg-base-300 p-10 shadow-xl",children:[(0,t.jsx)("input",{className:"text-center w-full p-4 mb-4 rounded bg-base-100",type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"1234aaaa, 5678bbbb"}),(0,t.jsx)("button",{className:"btn btn-secondary w-full border-white/10",onClick:handleSubmit,children:"Enter"})]})]})},o=a(3136),m=a(1396),u=a.n(m);let Card=e=>{let{tier:r,link:a,access:s,color:l}=e;return(0,t.jsx)(o.E.div,{initial:{y:"5%",opacity:.5},animate:{y:0,opacity:1},whileTap:{scale:.95},children:(0,t.jsx)(u(),{href:s?a:"/member",children:(0,t.jsx)("div",{className:"card md:w-80 lg:w-72 xl:w-96 bg-base-300 shadow-xl text-primary-content border ".concat(l," ").concat(s?"":"opacity-30"),children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h2",{className:"card-title text-primary",children:r}),(0,t.jsx)("p",{className:"text-primary",children:s?"Stufe freigeschaltet":"Stufe nicht freigeschaltet"}),(0,t.jsx)("div",{className:"card-actions justify-end mt-6"})]})})})})},LoadingSpinner=()=>(0,t.jsx)("div",{className:"flex justify-center items-center mt-48",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-secondary"})});var page=()=>{let[e,r]=(0,s.useState)(!1),[a,l]=(0,s.useState)(["black"]),[c,i]=(0,s.useState)(!0),isTierAccessible=e=>"black"===e||a.includes(e),o=d.filter(e=>isTierAccessible(e)||"black"===e),m=d.filter(e=>!isTierAccessible(e)&&"black"!==e),u=[...o,...m];return((0,s.useEffect)(()=>{let e=localStorage.getItem("cookie-kk-member");if(e){let a=decrypt(e),t=JSON.parse(a);Array.isArray(t)&&t.length>0&&"none"!==t[0]?(r(!0),l(t)):l(["black"])}setTimeout(()=>{i(!1)},500)},[]),c)?(0,t.jsx)(LoadingSpinner,{}):e?(0,t.jsxs)("div",{className:"mx-3 md:mx-auto md:container md:my-5",children:[(0,t.jsx)("h3",{className:"mt-24 mb-12 text-3xl text-primary text-center",children:(0,t.jsx)("div",{className:n().className,children:"Nihao, wilkommen in deinem Mitgliederbereich!"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mx-auto",children:u.map((e,r)=>(0,t.jsx)("div",{className:"w-full md:w-1/2 lg:w-1/3 p-4",children:(0,t.jsx)(Card,{tier:translateTier(e),access:isTierAccessible(e)||"black"===e,link:generateLink(e),color:translateBorderColor(e)})},r))})]}):(0,t.jsx)(memberLogin,{setHasAccess:r})}}},function(e){e.O(0,[218,6,396,913,971,864,744],function(){return e(e.s=3543)}),_N_E=e.O()}]);